# 자바 메모리 구조와 static

## 핵심 개념

자바 메모리는 **메서드 영역**(클래스 정보 + static), **스택 영역**(메서드 실행 + 지역변수), **힙 영역**(인스턴스)으로 구성된다.

- **메서드 영역**: 클래스 정보, static 변수, 상수 저장 (프로그램 전체 공유)
- **스택 영역**: 메서드 호출 시 스택 프레임 생성, 지역변수 저장 (쓰레드마다 독립)
- **힙 영역**: 인스턴스, 배열 생성 (GC 관리 대상)
```java
public class Data {
    private static int count;  // 메서드 영역
    private int value;         // 힙 영역 (인스턴스마다)
    
    public void method() {
        int local = 10;        // 스택 영역 (메서드 종료 시 제거)
    }
}
```

## 주요 특징

**스택 프레임 동작 (LIFO)**
- 메서드 호출 시 프레임 생성 → 지역변수 저장
- 메서드 종료 시 프레임 제거 → 지역변수 소멸

**static 변수**
- 메서드 영역에 **단 1개만** 존재, 모든 인스턴스가 공유
- 클래스명으로 접근 (권장): `Data.count`
- 프로그램 시작 시 생성 → JVM 종료 시 제거

**static 메서드**
- 인스턴스 생성 없이 호출 가능: `ClassName.method()`
- **제약**: 인스턴스 변수/메서드 사용 불가 (참조값 없음)
- 유틸리티 메서드에 주로 사용
```java
public class MathUtils {
    public static int add(int a, int b) {
        return a + b;  // 인스턴스 변수 없이 동작
    }
}
// 사용: MathUtils.add(3, 5);
```

## 면접 대비 핵심

**Q1. static 변수는 왜 메서드 영역에 저장되나?**
- 모든 인스턴스가 공유해야 하므로 힙이 아닌 메서드 영역에 저장
- 클래스 로딩 시 1개만 생성되어 메모리 효율적

**Q2. static 메서드에서 인스턴스 변수를 사용할 수 없는 이유는?**
- static 메서드는 클래스명으로 호출되어 **참조값 없이** 실행됨
- 어느 인스턴스의 변수를 사용할지 알 수 없어 컴파일 오류 발생

**Q3. main() 메서드는 왜 static인가?**
- 프로그램 시작점이므로 인스턴스 생성 전에 실행되어야 함
- JVM이 클래스명으로 직접 호출하므로 static 필수

**Q4. 지역변수, 인스턴스 변수, static 변수의 생명주기는?**
- **지역변수**: 메서드 종료 시 소멸 (가장 짧음)
- **인스턴스 변수**: GC 전까지 생존 (중간)
- **static 변수**: JVM 종료 시 소멸 (가장 김)

**Q5. GC 대상이 되는 조건은?**
- 어떤 변수에서도 참조되지 않는 인스턴스
- 힙 내에서만 서로 참조하는 고립된 인스턴스 그룹도 GC 대상
