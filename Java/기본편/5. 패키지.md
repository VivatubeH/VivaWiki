## 핵심 요약
- 패키지는 관련 클래스들을 분류하고 관리하기 위한 디렉토리 개념으로, 코드 첫 줄에 `package` 키워드로 선언한다.
- 다른 패키지의 클래스를 사용할 때는 전체 경로를 명시하거나 `import`를 사용하여 경로를 생략할 수 있다.
- 패키지 이름은 폴더 구조와 일치해야 하며(필수), 소문자로 작성하고(관례), 외부 배포 시 도메인을 거꾸로 사용한다(관례).

# 패키지

## 패키지가 필요한 이유

프로그램이 작을 때는 클래스가 몇 개 없어서 관리가 쉽지만, 프로그램이 커지면 수많은 클래스를 분류할 필요가 생긴다.

**작은 프로그램**
```
Order
User
Product
```

**큰 프로그램**
```
User
UserManager
UserHistory
Product
ProductCatalog
ProductImage
Order
OrderService
OrderHistory
ShoppingCart
CartItem
Payment
PaymentHistory
Shipment
ShipmentTracker
```

컴퓨터는 파일 분류를 위해 폴더/디렉토리 개념을 제공한다. 자바는 이와 유사하게 **패키지(package)**를 제공한다.

## 패키지로 분류하기
```
* user
  - User
  - UserManager
  - UserHistory
* product
  - Product
  - ProductCatalog
  - ProductImage
* order
  - Order
  - OrderService
  - OrderHistory
* cart
  - ShoppingCart
  - CartItem
* payment
  - Payment
  - PaymentHistory
* shipping
  - Shipment
  - ShipmentTracker
```

`user`, `product`, `order` 등이 패키지다. 각 패키지 안에 관련된 클래스들을 넣는다.

# 패키지 사용법

## 패키지 생성과 클래스 작성

패키지를 먼저 만들고, 그 안에 클래스를 작성한다.

**pack.Data**
```java
package pack;

public class Data {
    public Data() {
        System.out.println("패키지 pack Data 생성");
    }
}
```

패키지를 사용하는 경우 코드 첫 줄에 `package` 키워드로 패키지 이름을 선언한다.

**pack.a.User**
```java
package pack.a;

public class User {
    public User() {
        System.out.println("패키지 pack.a 회원 생성");
    }
}
```

`pack` 하위에 `a`라는 패키지를 만들고 `User` 클래스를 작성했다.

참고: 다른 패키지에서 생성자를 호출하려면 `public`을 붙여야 한다. (접근 제어자에서 상세 설명)

## 다른 패키지의 클래스 사용

**pack.PackageMain1**
```java
package pack;

public class PackageMain1 {
    public static void main(String[] args) {
        Data data = new Data();  // 같은 패키지
        pack.a.User user = new pack.a.User();  // 다른 패키지
    }
}
```

**실행 결과**
```
패키지 pack Data 생성
패키지 pack.a 회원 생성
```

**사용 규칙**
- 같은 패키지: `PackageMain1`과 `Data`는 같은 `pack` 패키지에 있으므로 패키지 경로 생략 가능
- 다른 패키지: `PackageMain1`과 `User`는 다른 패키지에 있으므로 `pack.a.User`처럼 전체 경로 필요

# import

다른 패키지의 클래스를 사용할 때마다 전체 경로를 쓰는 것은 불편하다. `import`를 사용하면 경로를 생략할 수 있다.

## import 사용
```java
package pack;

import pack.a.User;

public class PackageMain2 {
    public static void main(String[] args) {
        Data data = new Data();
        User user = new User();  // import 덕분에 패키지명 생략
    }
}
```

**실행 결과**
```
패키지 pack Data 생성
패키지 pack.a 회원 생성
```

코드 구조:
1. 첫 줄: `package` 선언
2. 다음 줄: `import` 선언
3. 클래스 코드

`import`를 사용하면 패키지명을 생략하고 클래스 이름만 사용할 수 있다.

## import 와일드카드(*)

특정 패키지의 모든 클래스를 사용하고 싶을 때 `*`(별)을 사용한다.
```java
package pack;

import pack.a.*;  // pack.a의 모든 클래스

public class PackageMain2 {
    public static void main(String[] args) {
        Data data = new Data();
        User user = new User();
    }
}
```

`pack.a` 패키지의 모든 클래스를 패키지명 없이 사용할 수 있다.

# 클래스 이름 중복

패키지가 다르면 같은 이름의 클래스를 사용할 수 있다.
```
pack.a.User
pack.b.User
```

클래스 이름은 같지만 패키지 이름으로 구분한다.

## 같은 이름 클래스 동시 사용

**pack.b.User**
```java
package pack.b;

public class User {
    public User() {
        System.out.println("패키지 pack.b 회원 생성");
    }
}
```

**동시 사용 예제**
```java
package pack;

import pack.a.User;

public class PackageMain3 {
    public static void main(String[] args) {
        User userA = new User();  // pack.a.User (import됨)
        pack.b.User userB = new pack.b.User();  // pack.b.User (전체 경로)
    }
}
```

같은 이름의 클래스가 있으면 `import`는 하나만 선택할 수 있다. 자주 사용하는 것을 `import`하고, 나머지는 전체 경로를 명시한다.

물론 둘 다 전체 경로로 사용하면 `import` 없이도 가능하다.

# 패키지 규칙

## 필수 규칙

**패키지 이름과 위치는 폴더(디렉토리) 위치와 같아야 한다** (필수)

예: `pack.a.User` 클래스는 `pack/a/User.java` 파일에 위치해야 함

## 관례

1. **패키지 이름은 모두 소문자 사용** (관례)
```java
   package com.example.myapp;  // 좋음
   package Com.Example.MyApp;  // 나쁨
```

2. **도메인 이름을 거꾸로 사용** (관례)
```java
   package com.company.myapp;
```
   
   **이유**: 수많은 외부 라이브러리와 함께 사용할 때 클래스 이름 충돌 방지
   
   **언제 지켜야 하나?**
   - 오픈소스나 라이브러리를 만들어 외부에 제공할 때: 꼭 지킬 것
   - 직접 배포하는 애플리케이션: 보통 문제 없음

## 패키지와 계층 구조

패키지는 계층 구조를 이룬다.
```
a
  b
  c
```

총 3개의 패키지가 존재:
- `a`
- `a.b`
- `a.c`

**중요**: 계층 구조처럼 보이지만 서로 완전히 다른 패키지다.

- `a` 패키지에서 `a.b` 패키지의 클래스를 사용하려면 `import` 필요
- 반대도 마찬가지

패키지가 계층 구조를 이루더라도 **모든 패키지는 서로 다른 패키지**다.

물론 사람이 이해하기 쉽게 계층 구조로 분류하는 것은 좋다. 큰 분류에서 세세한 분류로 나누는 것이 일반적이다.

# 패키지 활용 예제

실제 프로젝트에서 패키지를 어떻게 구성하는지 예제로 살펴본다. (프로젝트 규모와 아키텍처에 따라 달라질 수 있음)

## 전체 구조
```
com.helloshop
  user
    User
    UserService
  product
    Product
    ProductService
  order
    Order
    OrderService
    OrderHistory
```

## 각 패키지의 클래스

**com.helloshop.user 패키지**
```java
package com.helloshop.user;

public class User {
    String userId;
    String name;
}
```
```java
package com.helloshop.user;

public class UserService {
}
```

**com.helloshop.product 패키지**
```java
package com.helloshop.product;

public class Product {
    String productId;
    int price;
}
```
```java
package com.helloshop.product;

public class ProductService {
}
```

**com.helloshop.order 패키지**
```java
package com.helloshop.order;

import com.helloshop.product.Product;
import com.helloshop.user.User;

public class Order {
    User user;
    Product product;
    
    public Order(User user, Product product) {
        this.user = user;
        this.product = product;
    }
}
```

- 다른 패키지의 기능이 필요하면 `import` 사용
- 생성자에 `public`을 붙여야 다른 패키지에서 호출 가능
```java
package com.helloshop.order;

import com.helloshop.product.Product;
import com.helloshop.user.User;

public class OrderService {
    public void order() {
        User user = new User();
        Product product = new Product();
        Order order = new Order(user, product);
    }
}
```
```java
package com.helloshop.order;

public class OrderHistory {
}
```

## 패키지 구성 원칙

- 서로 관련된 클래스는 하나의 패키지에 모으기
- 관련이 적은 클래스는 다른 패키지로 분리하기

# 정리

**패키지**
- 관련 클래스를 분류하고 관리하기 위한 디렉토리 개념
- 프로그램이 커질수록 필수적

**패키지 선언**
- 코드 첫 줄에 `package` 키워드 사용
- 패키지 이름과 폴더 구조는 일치해야 함 (필수)

**import**
- 다른 패키지의 클래스 사용 시 경로 생략 가능
- `import pack.a.User;` - 특정 클래스
- `import pack.a.*;` - 패키지의 모든 클래스

**패키지 규칙**
- 패키지 이름 = 폴더 구조 (필수)
- 소문자 사용 (관례)
- 도메인 거꾸로 사용 (외부 배포 시 관례)

**클래스 이름 중복**
- 패키지가 다르면 같은 이름의 클래스 사용 가능
- `import`는 하나만 선택, 나머지는 전체 경로 사용

**계층 구조**
- 패키지는 계층 구조처럼 보이지만 서로 독립적
- 상위 패키지와 하위 패키지도 서로 다른 패키지
- `import` 필요
